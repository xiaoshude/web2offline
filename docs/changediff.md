# 基于入口的变动检测

如何判定静态资源是否更新了？

假定所有的静态资源，除了 html，文件名都包含内容 hash，那么只要判断 html 文件 hash 没变，所以内容必定都没变。

所以变动检测的步骤：
1. 对入口发送一个 https 请求，如果响应 200 而且为 html；
2. 计算 hash： 如果存在 etag 就用 etag，否则用内容 hash；
3. 对比 hash： 如果 cache.json 有对应的 hash，就执行比对，如果不存在，读取本地文件计算hash，然后对比。

